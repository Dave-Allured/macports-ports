# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           compilers 1.0
PortGroup           compiler_blacklist_versions 1.0

name                fgsl
version             1.6.0
revision            0

categories          math science
maintainers         {takeshi @tenomoto} \
                    {@Dave-Allured noaa.gov:dave.allured} \
                    openmaintainer
license             GPL-2

description         Fortran interface to the GNU scientific library
long_description    A portable, object-based Fortran interface to the GNU scientific library \
                    (GSL), a collection of numerical routines for scientific computing. \
                    Version 1.6.x is for use with GSL versions >= 2.7. \
                    Source: https://github.com/reinh-bader/fgsl

homepage            https://doku.lrz.de/fgsl-a-fortran-interface-to-the-gnu-scientific-library-10746505.html

# Switch to private repo, not github, 2024 May 26.  See home page.
# Parts of fancy URL may be keyed for each specific release.
# Don't know.  Don't care.  Make it work.

master_sites        https://doku.lrz.de/files/10746505/611614740/5/1715160190380
distname            ${name}-${version}

checksums           rmd160  716c041b9f6cbb21369f2d038677b7d03a411b8a \
                    sha256  00b7147755cf0558ec07fff8c26692213580d20f5a9410a8dd13a56a0c336490 \
                    size    11111005

depends_build       port:pkgconfig
depends_lib         port:gsl
use_parallel_build  no
universal_variant   no

# Fix 10.7 build.
# Copied from https://github.com/macports/macports-ports/pull/17193
# https://github.com/william-dawson/NTPoly/issues/192
compiler.blacklist-append \
                    {clang < 500}

compilers.choose    fc f77 f90
compilers.setup     require_fortran -g95

use_autoreconf      yes

destroot.args-append    fgsl_exampledir=${prefix}/share/${name}/examples \
                        fgsl_docdir=${prefix}/share/doc/${name} \
                        fgsl_doc2dir=${prefix}/share/doc/${name}/html
